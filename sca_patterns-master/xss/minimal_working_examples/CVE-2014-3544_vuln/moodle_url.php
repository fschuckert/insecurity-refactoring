<?php

class MoodleUrl
{

    protected $scheme = '';

    protected $host = '';

    protected $path = '';

    public function __construct($url) 
    {
        $parts = parse_url($url);
        if ($parts === false) {
            echo 'ERROR';
        }
        if (isset($parts['query'])) {
            // Note: the values may not be correctly decoded, url parameters should be always passed as array.
            parse_str(str_replace('&amp;', '&', $parts['query']), $this->params);
        }
        unset($parts['query']);
        foreach ($parts as $key => $value) {
            # assigns class variables
            $this->$key = $value;
        }
    }

    public function out($escaped = true, array $overrideparams = null) {
        $uri = $this->out_omit_querystring().$this->slashargument;
        return $uri;
    }

    /**
     * Returns url without parameters, everything before '?'.
     *
     * @param bool $includeanchor if {@link self::anchor} is defined, should it be returned?
     * @return string
     */
    public function out_omit_querystring($includeanchor = false) {
        $uri = $this->scheme ? $this->scheme.':'.((strtolower($this->scheme) == 'mailto') ? '':'//'): '';
        $uri .= $this->host ? $this->host : '';
        $uri .= $this->path ? $this->path : '';

        return $uri;
    }
}

?>