<?php

require_once 'dbinterface.php';


/* vim: set expandtab sw=4 ts=4 sts=4: */
/**
 * Interface to the improved MySQL extension (MySQLi)
 *
 * @package    PhpMyAdmin-DBI
 * @subpackage MySQLi
 */
class PMA_DBI_Mysqli implements PMA_DBI_Extension
{
    private $pdo;

    public function connect() {

        // NULL enables connection to the default socket

        $this->pdo = new PDO('sqlite:test.sql', null, null, array(PDO::ATTR_PERSISTENT => true));
        $this->pdo->query("CREATE TABLE tables (table_name varchar(255));");

        return $this->pdo;
    }


    /**
     * runs a query and returns the result
     *
     * @param string $query   query to execute
     * @param mysqli $link    mysqli object
     * @param int    $options query options
     *
     * @return mysqli_result|bool
     */
    public function realQuery($query, $link)
    {        
        $retval = array();

        $stmt = $this->pdo->prepare($query);
        if($stmt->execute(array())){
            return $stmt->fetchAll();
            // while( $row = $stmt->fetch()){
            //     $retval[] = $row['val'];
            // }
        }

        return $retval;
    }

  
}
?>
